<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Logpile : The purpose of this projects is to in only one repository all the errors of your application. This project provides api for the java application. " />
     <link rel="shortcut icon" href="/favicon.ico" >
    <link rel="stylesheet" type="text/css" media="screen" href="/css/stylesheet.css">
      <link rel="stylesheet" type="text/css" media="screen" href="/css/logpile.css">

    <title>Logpile - Couchbase module</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/devlogpile/logpile">View on GitHub</a>

          <div id="logo-div" ><a href="/"><img class="logo-image" src="/images/logo-logpile.png"></a></div><div id="logo-text"><h1 id="project_title">Logpile</h1>    <h2 id="project_tagline">Another framework for spying the errors of your application.</h2> <section id="downloads">
              <a title="Download the latest stable version." class="zip_download_link" href="https://github.com/devlogpile/logpile/raw/master/bin/logpile-dist.zip" >Download this project as a .zip file</a>
              <!--https://github.com/devlogpile/logpile/zipball/master-->
              <!--a class="tar_download_link" href="https://github.com/devlogpile/logpile/tarball/master">Download this project as a tar.gz file</a-->
            </section></div>
      

           
        </header>
    </div>
  <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
            <table id="main_menu" class="inner">
              <tr>
                 <td class="menu_brand">Features : </td>
                <td class="menu_cell"><a href="/"> Main</a></td>
                <td class="menu_cell"><a href="/server"> Server</a></td>
                <td class="menu_cell"><a href="/client"> Client</a></td>
                <td class="menu_cell"><a href="/modvertx"> Vertx mods</a></td>
                <td>&nbsp;</td>
              </tr>
            </table>
           <h1>Couchbase Persistor</h1>

<p>This module allows data to be saved, retrieved, searched for, and deleted in a Couchbase instance. This project use the  event bus of vertx for managing the datas.  </p>

<h4>To use this module you must have a Couchbase DB instance running on your network.</h4>

<p>This is a multi-threaded worker module.</p>

<h2>Source code</h2>

<p>The source code of this module  is available <a href="https://github.com/devlogpile/logpile/tree/master/mod-couchbase">here</a>.</p>

<h2>Dependencies</h2>

<p>This module requires a Couchbase DB to be available on the network.</p>

<h2>Name</h2>

<p>The module name is <code>org.skarb.vertx~mod-couchbase</code>.</p>

<h2>Configuration</h2>

<p>For using this module, you must set a specific configuration:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">{
    &quot;address&quot;: &lt;address&gt;,
    &quot;host&quot;: &lt;host&gt;,
    &quot;bucket&quot;: &lt;bucket&gt;,
    &quot;password&quot;: &lt;password&gt;,
    &quot;query-limit&quot;: &lt;query-limit&gt;,
    &quot;store-timeout&quot;: &lt;store-timeout&gt;
}
</code></pre></div>
<p>For example:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">{
    &quot;address&quot;: &quot;test.my_persistor&quot;,
    &quot;host&quot;: &quot;http://192.168.1.100:8091/pools&quot;,
    &quot;bucket&quot;: &quot;myBucket&quot;,
    &quot;password&quot;: &quot;passwordOfTheBucket&quot;,
    &quot;query-limit&quot;: 200,
    &quot;store-timeout&quot;: 0
}
</code></pre></div>
<p>Let&#39;s take a look at each field in turn:</p>

<ul>
<li><code>address</code> The main address for the module. Every module has a main address. Defaults to <code>vertx.couchbasepersistor</code>.</li>
<li><code>host</code> The url of the couchbase server. Defaults to <code>http://127.0.0.1:8091/pools</code>.</li>
<li><code>bucket</code> Name of the bucket in the couchbase instance to use. Defaults to <code>default</code>.</li>
<li><code>password</code> The password of the bucket. Defaults none.</li>
<li><code>query-limit</code> The number of the results to retreive by a view query. Default is 200.</li>
<li><code>store-timeout</code> The time of the datas must be store in couchbase db. Default is 0 (no deletion of the datas).</li>
</ul>

<h2>Operations</h2>

<p>The module supports the following operations :</p>

<h3>Store Commands</h3>

<h4>Add</h4>

<p>create a new document in the database.</p>

<p>To create a new document send a JSON message to the module main address:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">{
    &quot;action&quot;: &quot;add&quot;,
    &quot;key&quot;: &quot;1234&quot;,
    &quot;timeout&quot;: 0,
    &quot;document&quot;: &lt;document&gt;
}     
</code></pre></div>
<p>Where:
* <code>key</code> is the key of the document. Optional parameter. If the key is not set then an key is generated. 
* <code>timeout</code> is the time of the data is store in couchbase. if not set, then the default value of the persistor is used.
* <code>document</code> is the JSON document that you wish to save.</p>

<p>The response contains the following informations :</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">{
    &quot;key&quot;: &quot;1234&quot;,
    &quot;count&quot;: 1,
    &quot;message&quot;: &lt;message&gt; 
}     
</code></pre></div>
<p>Where:
* <code>key</code> The key value which is stored. Optional parameter.
* <code>count</code> the number of the data stored. if the value is equal to 1, then the document is stored in the couchbase server. Otherwise an error occured and the data was not saved to couchbase.
* <code>message</code> The error message.</p>

<h4>Replace</h4>

<p>Replace a  document in the database.</p>

<p>To replace a new document send a JSON message to the module main address:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">{
    &quot;action&quot;: &quot;replace&quot;,
    &quot;key&quot;: &lt;key&gt;,
    &quot;timeout&quot;: &lt;timeout&gt;,
    &quot;document&quot;: &lt;document&gt;
}     
</code></pre></div>
<p>The datas in input and the response are identical to call the <code>add</code> method.</p>

<h4>Set</h4>

<p>set a document in the database. if the document does not exist, then the document is created. if the document already exists, then the document is replaced</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">{
    &quot;action&quot;: &quot;set&quot;,
    &quot;key&quot;: &lt;key&gt;,
    &quot;timeout&quot;: &lt;timeout&gt;,
    &quot;document&quot;: &lt;document&gt;
}     
</code></pre></div>
<p>The datas in input and the response are identical to call the <code>add</code> method.</p>

<h3>Find Commands</h3>

<h4>Get</h4>

<p>get a specific document in the database.</p>

<p>To get a document send a JSON message to the module main address:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">{
    &quot;action&quot;: &quot;get&quot;,
    &quot;key&quot;: &quot;1234&quot;
}  
</code></pre></div>
<p>Where:
* <code>key</code> is the key of the document to retrieve. Mandatory parameter. </p>

<p>The response to this message contains the following informations :</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">{
    &quot;count&quot;: 1,
    &quot;document&quot;: &lt;document&gt;
}  
</code></pre></div>
<p>Where:
* <code>count</code> The number of document which match to this key. if the document was found, the value is 1. Otherwise, it&#39;s equal to 0.
* <code>document</code> The document.</p>

<h4>View</h4>

<p>Call a view for retreiving a list of documents.</p>

<p>To call a view send a JSON message to the module main address:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">{
    &quot;action&quot;: &quot;view&quot;,
    &quot;documentName&quot;: &quot;beer&quot;,
    &quot;view&quot;: &quot;brewery_beers&quot;
}  
</code></pre></div>
<p>The response to this message contains the following informations :</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">{
    &quot;total_rows&quot;: 8,
    &quot;rows&quot;: &lt;results&gt;
}  
</code></pre></div>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Logpile maintained by <a href="https://github.com/devlogpile">devlogpile</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>